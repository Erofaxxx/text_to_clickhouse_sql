# –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ClickHouse CLI –Ω–∞–ø—Ä—è–º—É—é (–±–µ–∑ Python)

## –í–≤–µ–¥–µ–Ω–∏–µ

–≠—Ç–æ—Ç –≥–∞–π–¥ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **–≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é AI —Ñ—É–Ω–∫—Ü–∏—é ClickHouse** –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ `clickhouse-client`, –±–µ–∑ Python –ø—Ä–æ–≥—Ä–∞–º–º—ã. –í—ã —Å–º–æ–∂–µ—Ç–µ –∑–∞–¥–∞–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–º —è–∑—ã–∫–µ –ø—Ä—è–º–æ –≤ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ ClickHouse.

## –ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ?

- ‚úÖ –ü—Ä—è–º–∞—è —Ä–∞–±–æ—Ç–∞ —Å ClickHouse –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–æ–≥—Ä–∞–º–º
- ‚úÖ –ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø –∫ AI-–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ SQL
- ‚úÖ –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –∑–∞–ø—Ä–æ—Å–∞–º–∏
- ‚úÖ –ù–µ –Ω—É–∂–µ–Ω Python

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ ClickHouse Client

### Linux (Debian/Ubuntu)

```bash
sudo apt-get install -y apt-transport-https ca-certificates dirmngr
sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv 8919F6BD2B48D754
echo "deb https://packages.clickhouse.com/deb stable main" | sudo tee /etc/apt/sources.list.d/clickhouse.list
sudo apt-get update
sudo apt-get install -y clickhouse-client
```

### macOS

```bash
brew install clickhouse
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

```bash
clickhouse-client --version
```

–î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å —á—Ç–æ-—Ç–æ —Ç–∏–ø–∞: `ClickHouse client version 24.x.x.x`

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ AI –¥–ª—è ClickHouse CLI

–£ –≤–∞—Å –µ—Å—Ç—å –¥–≤–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–ø—Ä–æ—â–µ)

–ü—Ä–æ—Å—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è —Å –≤–∞—à–∏–º API –∫–ª—é—á–æ–º –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º `clickhouse-client`:

#### –î–ª—è OpenAI:
```bash
export OPENAI_API_KEY="–≤–∞—à-–∫–ª—é—á-openai"
```

#### –î–ª—è Anthropic Claude:
```bash
export ANTHROPIC_API_KEY="–≤–∞—à-–∫–ª—é—á-anthropic"
```

#### –î–ª—è OpenRouter (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):
OpenRouter —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ OpenAI-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π API, –ø–æ—ç—Ç–æ–º—É –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª (—Å–º. –í–∞—Ä–∏–∞–Ω—Ç 2).

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª (–±–æ–ª—å—à–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π)

–°–æ–∑–¥–∞–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª –¥–ª—è ClickHouse Client. –§–∞–π–ª –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ –æ–¥–Ω–æ–º –∏–∑ —ç—Ç–∏—Ö –º–µ—Å—Ç:

- `~/.config/clickhouse/config.yaml` (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- `~/.clickhouse-client/config.yaml` (—Å—Ç–∞—Ä–æ–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ)

#### –ü—Ä–∏–º–µ—Ä –¥–ª—è OpenRouter (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):

```bash
# –°–æ–∑–¥–∞–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –µ—Å–ª–∏ –µ—ë –Ω–µ—Ç
mkdir -p ~/.config/clickhouse

# –°–æ–∑–¥–∞–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª
cat > ~/.config/clickhouse/config.yaml << 'EOF'
ai:
  provider: openai
  api_key: –≤–∞—à-–∫–ª—é—á-openrouter
  base_url: https://openrouter.ai/api/v1
  model: anthropic/claude-3.5-sonnet
  temperature: 0.0
  max_tokens: 1000
  timeout_seconds: 30
  enable_schema_access: true
EOF
```

**–ì–¥–µ –≤–∑—è—Ç—å –∫–ª—é—á OpenRouter:**
1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ https://openrouter.ai/
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª API Keys
3. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –∫–ª—é—á
4. –í—Å—Ç–∞–≤—å—Ç–µ –µ–≥–æ –≤ config.yaml –≤–º–µ—Å—Ç–æ `–≤–∞—à-–∫–ª—é—á-openrouter`

#### –ü—Ä–∏–º–µ—Ä –¥–ª—è OpenAI:

```yaml
ai:
  provider: openai
  api_key: –≤–∞—à-–∫–ª—é—á-openai
  model: gpt-4o
  temperature: 0.0
  max_tokens: 1000
  enable_schema_access: true
```

**–ì–¥–µ –≤–∑—è—Ç—å –∫–ª—é—á OpenAI:**
- https://platform.openai.com/api-keys

#### –ü—Ä–∏–º–µ—Ä –¥–ª—è Anthropic Claude:

```yaml
ai:
  provider: anthropic
  api_key: –≤–∞—à-–∫–ª—é—á-anthropic
  model: claude-3-5-sonnet-20241022
  temperature: 0.0
  max_tokens: 1000
  enable_schema_access: true
```

**–ì–¥–µ –≤–∑—è—Ç—å –∫–ª—é—á Anthropic:**
- https://console.anthropic.com/

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–í—ã –º–æ–∂–µ—Ç–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ AI:

```yaml
ai:
  provider: openai
  api_key: –≤–∞—à-–∫–ª—é—á
  model: gpt-4o                    # –ú–æ–¥–µ–ª—å –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
  temperature: 0.0                  # 0.0 = –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π, 1.0 = —Ç–≤–æ—Ä—á–µ—Å–∫–∏–π
  max_tokens: 1000                  # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ –æ—Ç–≤–µ—Ç–∞
  timeout_seconds: 30               # –¢–∞–π–º–∞—É—Ç –∑–∞–ø—Ä–æ—Å–∞
  enable_schema_access: true        # –†–∞–∑—Ä–µ—à–∏—Ç—å AI –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å —Å—Ö–µ–º—É –ë–î
  max_steps: 10                     # –ú–∞–∫—Å–∏–º—É–º —à–∞–≥–æ–≤ –¥–ª—è –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è —Å—Ö–µ–º—ã
```

## –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ ClickHouse

### –ë–∞–∑–æ–≤–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

```bash
clickhouse-client \
  --host –≤–∞—à-—Ö–æ—Å—Ç.net \
  --port 9440 \
  --user –≤–∞—à-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å \
  --password –≤–∞—à-–ø–∞—Ä–æ–ª—å \
  --database –≤–∞—à–∞-–±–∞–∑–∞ \
  --secure
```

**–í–∞–∂–Ω–æ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **–Ω–∞—Ç–∏–≤–Ω—ã–π –ø–æ—Ä—Ç** ClickHouse:
- `9440` - –¥–ª—è –∑–∞—â–∏—â–µ–Ω–Ω–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è (—Å TLS/SSL)
- `9000` - –¥–ª—è –Ω–µ–∑–∞—â–∏—â–µ–Ω–Ω–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

**–ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTP –ø–æ—Ä—Ç—ã** (8443, 8123) - –æ–Ω–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç —Å `clickhouse-client`!

### –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

–ß—Ç–æ–±—ã –Ω–µ –≤–≤–æ–¥–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫–∞–∂–¥—ã–π —Ä–∞–∑, –¥–æ–±–∞–≤—å—Ç–µ –∏—Ö –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª:

```yaml
# ~/.config/clickhouse/config.yaml
host: –≤–∞—à-—Ö–æ—Å—Ç.net
port: 9440
user: –≤–∞—à-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
password: –≤–∞—à-–ø–∞—Ä–æ–ª—å
database: –≤–∞—à–∞-–±–∞–∑–∞
secure: true

# AI –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (—Å–º. –≤—ã—à–µ)
ai:
  provider: openai
  api_key: –≤–∞—à-–∫–ª—é—á
  # ...
```

–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å–∫–∞—Ç—å:

```bash
clickhouse-client
```

### –î–ª—è Yandex Cloud ClickHouse

–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Yandex Managed Service for ClickHouse:

```bash
clickhouse-client \
  --host –≤–∞—à-–∫–ª–∞—Å—Ç–µ—Ä.mdb.yandexcloud.net \
  --port 9440 \
  --user –≤–∞—à-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å \
  --password –≤–∞—à-–ø–∞—Ä–æ–ª—å \
  --database –≤–∞—à–∞-–±–∞–∑–∞ \
  --secure \
  --config-file ~/.config/clickhouse/config.yaml
```

–ï—Å–ª–∏ –Ω—É–∂–µ–Ω SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç:

```bash
# –°–∫–∞—á–∞–π—Ç–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç Yandex Cloud
wget "https://storage.yandexcloud.net/cloud-certs/CA.pem" -O ~/.clickhouse-client/root.crt

# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏
clickhouse-client \
  --host –≤–∞—à-–∫–ª–∞—Å—Ç–µ—Ä.mdb.yandexcloud.net \
  --port 9440 \
  --user –≤–∞—à-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å \
  --password –≤–∞—à-–ø–∞—Ä–æ–ª—å \
  --database –≤–∞—à–∞-–±–∞–∑–∞ \
  --secure \
  --config-file ~/.config/clickhouse/config.yaml
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ AI –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ SQL

### –û—Å–Ω–æ–≤–Ω–æ–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å

–ü–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ ClickHouse, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–µ—Ñ–∏–∫—Å `??` –ø–µ—Ä–µ–¥ –≤–∞—à–∏–º –∑–∞–ø—Ä–æ—Å–æ–º –Ω–∞ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–º —è–∑—ã–∫–µ:

```sql
:) ?? –ø–æ–∫–∞–∂–∏ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 –∑–∞–ø–∏—Å–µ–π –∏–∑ —Ç–∞–±–ª–∏—Ü—ã
```

### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∑–∞–ø—Ä–æ—Å–∞ —Å ??:

1. **AI –∏—Å—Å–ª–µ–¥—É–µ—Ç —Å—Ö–µ–º—É** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–∑–Ω–∞–µ—Ç –∫–∞–∫–∏–µ —Ç–∞–±–ª–∏—Ü—ã –∏ –∫–æ–ª–æ–Ω–∫–∏ –µ—Å—Ç—å –≤ –≤–∞—à–µ–π –±–∞–∑–µ
2. **–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç SQL** - —Å–æ–∑–¥–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π SQL –∑–∞–ø—Ä–æ—Å
3. **–í—ã–ø–æ–ª–Ω—è–µ—Ç –∑–∞–ø—Ä–æ—Å** - —Å—Ä–∞–∑—É –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

#### –ü—Ä–æ—Å—Ç–æ–π –≤—ã–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö:

```sql
:) ?? –ø–æ–∫–∞–∂–∏ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 –≤–∏–∑–∏—Ç–æ–≤
```

AI —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —á—Ç–æ-—Ç–æ —Ç–∏–ø–∞:
```sql
SELECT * FROM visits_complete
ORDER BY visit_date DESC
LIMIT 10
```

#### –ê–≥—Ä–µ–≥–∞—Ü–∏—è:

```sql
:) ?? —Å–∫–æ–ª—å–∫–æ –≤—Å–µ–≥–æ –∑–∞–ø–∏—Å–µ–π –≤ —Ç–∞–±–ª–∏—Ü–µ
```

```sql
:) ?? –ø–æ—Å—á–∏—Ç–∞–π –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–µ–π
```

#### –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞:

```sql
:) ?? –ø–æ–∫–∞–∂–∏ —Ç–æ–ø 5 —Å–∞–º—ã—Ö –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü
```

```sql
:) ?? –ø–æ—Å—á–∏—Ç–∞–π –≤–∏–∑–∏—Ç—ã –ø–æ –¥–Ω—è–º –∑–∞ –ø–æ—Å–ª–µ–¥–Ω—é—é –Ω–µ–¥–µ–ª—é
```

#### –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å—Ö–µ–º–µ:

```sql
:) ?? –ø–æ–∫–∞–∂–∏ –Ω–∞–∑–≤–∞–Ω–∏—è —Å—Ç–æ–ª–±—Ü–æ–≤ –∏ –∏—Ö —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö
```

```sql
:) ?? –∫–∞–∫–∏–µ —Ç–∞–±–ª–∏—Ü—ã –µ—Å—Ç—å –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
```

#### –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è:

```sql
:) ?? –ø–æ–∫–∞–∂–∏ –≤–∏–∑–∏—Ç—ã –∑–∞ –≤—á–µ—Ä–∞—à–Ω–∏–π –¥–µ–Ω—å
```

```sql
:) ?? –Ω–∞–π–¥–∏ –≤–∏–∑–∏—Ç—ã –≥–¥–µ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –±–æ–ª—å—à–µ 5 –º–∏–Ω—É—Ç
```

### –ö–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç –ø—Ä–æ—Ü–µ—Å—Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

–ö–æ–≥–¥–∞ –≤—ã –∑–∞–ø—É—Å–∫–∞–µ—Ç–µ –∑–∞–ø—Ä–æ—Å —Å `??`, ClickHouse –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å —Ä–∞–±–æ—Ç—ã AI:

```
:) ?? –ø–æ–∫–∞–∂–∏ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 5 –∑–∞–ø–∏—Å–µ–π

Starting AI SQL generation with schema discovery...
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

üîç list_databases
   ‚ûú system, default, mydb

üîç list_tables_in_database
   database: mydb
   ‚ûú visits_complete, users, products

üîç get_schema_for_table
   database: mydb
   table: visits_complete
   ‚ûú CREATE TABLE visits_complete (
        id UInt64,
        visit_date DateTime,
        user_id String,
        page_url String,
        duration UInt32
     ) ENGINE = MergeTree()
     ORDER BY visit_date

‚ú® SQL query generated successfully!
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

SELECT *
FROM mydb.visits_complete
ORDER BY visit_date DESC
LIMIT 5

‚îå‚îÄid‚îÄ‚î¨‚îÄvisit_date‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄuser_id‚îÄ‚î¨‚îÄpage_url‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄduration‚îÄ‚îê
‚îÇ 1  ‚îÇ 2024-01-15 14:30:00 ‚îÇ user123 ‚îÇ /home       ‚îÇ 120      ‚îÇ
‚îÇ 2  ‚îÇ 2024-01-15 14:25:00 ‚îÇ user456 ‚îÇ /products   ‚îÇ 300      ‚îÇ
‚îÇ 3  ‚îÇ 2024-01-15 14:20:00 ‚îÇ user789 ‚îÇ /about      ‚îÇ 45       ‚îÇ
‚îÇ 4  ‚îÇ 2024-01-15 14:15:00 ‚îÇ user123 ‚îÇ /contact    ‚îÇ 90       ‚îÇ
‚îÇ 5  ‚îÇ 2024-01-15 14:10:00 ‚îÇ user321 ‚îÇ /home       ‚îÇ 200      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

5 rows in set. Elapsed: 2.341 sec.
```

### –û–±—ã—á–Ω—ã–µ SQL –∑–∞–ø—Ä–æ—Å—ã

–ö–æ–Ω–µ—á–Ω–æ, –≤—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç–µ –≤—ã–ø–æ–ª–Ω—è—Ç—å –æ–±—ã—á–Ω—ã–µ SQL –∑–∞–ø—Ä–æ—Å—ã –±–µ–∑ AI:

```sql
:) SELECT * FROM visits_complete LIMIT 5;
```

```sql
:) DESCRIBE TABLE visits_complete;
```

```sql
:) SHOW TABLES;
```

## –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã ClickHouse CLI

### –ö–æ–º–∞–Ω–¥—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞:

```sql
\q –∏–ª–∏ exit    -- –í—ã–π—Ç–∏ –∏–∑ clickhouse-client
\h –∏–ª–∏ help    -- –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É
\d             -- –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã
\d table_name  -- –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü—ã
\c             -- –û—á–∏—Å—Ç–∏—Ç—å —ç–∫—Ä–∞–Ω
```

### –°–∏—Å—Ç–µ–º–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã:

```sql
-- –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
SHOW DATABASES;

-- –ü–æ–∫–∞–∑–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã –≤ —Ç–µ–∫—É—â–µ–π –±–∞–∑–µ
SHOW TABLES;

-- –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü—ã
DESCRIBE TABLE your_table;

-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–ª–æ–Ω–∫–∞—Ö
SELECT name, type, default_kind
FROM system.columns
WHERE table = 'your_table' AND database = 'your_database';

-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
SELECT * FROM system.query_log
WHERE type = 'QueryFinish'
ORDER BY event_time DESC
LIMIT 10;
```

### –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–≤–æ–¥–∞:

```sql
-- –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç (—É–¥–æ–±–Ω–æ –¥–ª—è —à–∏—Ä–æ–∫–∏—Ö —Ç–∞–±–ª–∏—Ü)
SELECT * FROM visits_complete LIMIT 1 FORMAT Vertical;

-- JSON —Ñ–æ—Ä–º–∞—Ç
SELECT * FROM visits_complete LIMIT 5 FORMAT JSON;

-- CSV —Ñ–æ—Ä–º–∞—Ç
SELECT * FROM visits_complete LIMIT 5 FORMAT CSV;

-- Pretty (–∫—Ä–∞—Å–∏–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
SELECT * FROM visits_complete LIMIT 5 FORMAT PrettyCompact;
```

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### 1. "AI features are not configured"

**–ü—Ä–æ–±–ª–µ–º–∞:** AI –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω.

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è (`OPENAI_API_KEY` –∏–ª–∏ `ANTHROPIC_API_KEY`)
- –ò–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª `~/.config/clickhouse/config.yaml`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å API –∫–ª—é—á–∞

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è
echo $OPENAI_API_KEY

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª
cat ~/.config/clickhouse/config.yaml
```

### 2. "Connection refused" –∏–ª–∏ "Unexpected packet from server"

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—Ç.

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **–Ω–∞—Ç–∏–≤–Ω—ã–π –ø–æ—Ä—Ç**:
- –ü–æ—Ä—Ç `9440` –¥–ª—è –∑–∞—â–∏—â–µ–Ω–Ω–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- –ü–æ—Ä—Ç `9000` –¥–ª—è –Ω–µ–∑–∞—â–∏—â–µ–Ω–Ω–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

**–ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ** HTTP –ø–æ—Ä—Ç—ã (8443, 8123, 443) - –æ–Ω–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç —Å `clickhouse-client`!

```bash
# –ü—Ä–∞–≤–∏–ª—å–Ω–æ:
clickhouse-client --host myhost.net --port 9440 --secure

# –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ:
clickhouse-client --host myhost.net --port 8443 --secure  # ‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç!
```

### 3. "Authentication failed"

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –ø–∞—Ä–æ–ª—å
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∞ –Ω–∞ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö

### 4. "SSL certificate problem"

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–æ–±–ª–µ–º—ã —Å SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–º.

**–†–µ—à–µ–Ω–∏–µ –¥–ª—è Yandex Cloud:**
```bash
# –°–∫–∞—á–∞–π—Ç–µ –∫–æ—Ä–Ω–µ–≤–æ–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
wget "https://storage.yandexcloud.net/cloud-certs/CA.pem" \
  -O ~/.clickhouse-client/root.crt

# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏
clickhouse-client \
  --host your-host.mdb.yandexcloud.net \
  --port 9440 \
  --secure
```

### 5. AI –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã

**–ü—Ä–∏—á–∏–Ω—ã:**
- AI –Ω–µ –ø–æ–Ω—è–ª –≤–∞—à –∑–∞–ø—Ä–æ—Å
- –°–ª–æ–∂–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

**–†–µ—à–µ–Ω–∏—è:**
- –§–æ—Ä–º—É–ª–∏—Ä—É–π—Ç–µ –∑–∞–ø—Ä–æ—Å—ã –±–æ–ª–µ–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ
- –£–ø–æ–º–∏–Ω–∞–π—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü –∏–ª–∏ –∫–æ–ª–æ–Ω–æ–∫
- –†–∞–∑–±–µ–π—Ç–µ —Å–ª–æ–∂–Ω—ã–π –∑–∞–ø—Ä–æ—Å –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ—Å—Ç—ã—Ö
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–±—ã—á–Ω—ã–π SQL –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤

**–ü—Ä–∏–º–µ—Ä—ã:**

‚ùå –ù–µ—è—Å–Ω–æ: `?? –ø–æ–∫–∞–∂–∏ –¥–∞–Ω–Ω—ã–µ`

‚úÖ –õ—É—á—à–µ: `?? –ø–æ–∫–∞–∂–∏ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 –∑–∞–ø–∏—Å–µ–π –∏–∑ —Ç–∞–±–ª–∏—Ü—ã visits`

‚úÖ –ï—â—ë –ª—É—á—à–µ: `?? –ø–æ–∫–∞–∂–∏ visit_date, user_id –∏ page_url –∏–∑ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 10 –∑–∞–ø–∏—Å–µ–π —Ç–∞–±–ª–∏—Ü—ã visits`

### 6. –ú–µ–¥–ª–µ–Ω–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è SQL

**–ü—Ä–∏—á–∏–Ω—ã:**
- –ë–æ–ª—å—à–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º —Ç–∞–±–ª–∏—Ü
- –ú–µ–¥–ª–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä–Ω–µ—Ç
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è API –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞

**–†–µ—à–µ–Ω–∏—è:**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–æ–ª–µ–µ –±—ã—Å—Ç—Ä—ã–µ –º–æ–¥–µ–ª–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, gpt-3.5-turbo –≤–º–µ—Å—Ç–æ gpt-4)
- –£–º–µ–Ω—å—à–∏—Ç–µ `max_steps` –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–±—ã—á–Ω—ã–π SQL –¥–ª—è —á–∞—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

## –°–æ–≤–µ—Ç—ã –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

### 1. –ò–∑—É—á–∏—Ç–µ –≤–∞—à—É —Å—Ö–µ–º—É –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–ü–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º AI, –ø–æ–ª–µ–∑–Ω–æ –∑–Ω–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É:

```sql
-- –°–ø–∏—Å–æ–∫ —Ç–∞–±–ª–∏—Ü
SHOW TABLES;

-- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã
DESCRIBE TABLE your_table;

-- –ò–ª–∏ —á–µ—Ä–µ–∑ AI:
:) ?? –∫–∞–∫–∏–µ —Ç–∞–±–ª–∏—Ü—ã –µ—Å—Ç—å –≤ –±–∞–∑–µ
:) ?? –ø–æ–∫–∞–∂–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü—ã visits
```

### 2. –°–æ—Ö—Ä–∞–Ω—è–π—Ç–µ —É–¥–∞—á–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã

–ö–æ–≥–¥–∞ AI —Å–æ–∑–¥–∞—Å—Ç —Ö–æ—Ä–æ—à–∏–π –∑–∞–ø—Ä–æ—Å, —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –µ–≥–æ:

```bash
# –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª —Å –≤–∞—à–∏–º–∏ –∑–∞–ø—Ä–æ—Å–∞–º–∏
nano ~/my_queries.sql

# –ü—Ä–∏–º–µ—Ä —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ:
# -- –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
# SELECT page_url, COUNT(*) as visits
# FROM visits_complete
# GROUP BY page_url
# ORDER BY visits DESC
# LIMIT 10;
```

### 3. –ö–æ–º–±–∏–Ω–∏—Ä—É–π—Ç–µ AI –∏ –æ–±—ã—á–Ω—ã–π SQL

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ AI –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø—Ä–æ—Ç–æ—Ç–∏–ø–∏—Ä–æ–≤–∞–Ω–∏—è, –ø–æ—Ç–æ–º –¥–æ—Ä–∞–±–æ—Ç–∞–π—Ç–µ –∑–∞–ø—Ä–æ—Å –≤—Ä—É—á–Ω—É—é:

```sql
-- 1. –°–Ω–∞—á–∞–ª–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ AI –¥–ª—è –æ—Å–Ω–æ–≤—ã
:) ?? –ø–æ–∫–∞–∂–∏ –≤–∏–∑–∏—Ç—ã –ø–æ –¥–Ω—è–º

-- 2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π SQL
-- 3. –î–æ—Ä–∞–±–æ—Ç–∞–π—Ç–µ –µ–≥–æ –ø–æ–¥ –≤–∞—à–∏ –Ω—É–∂–¥—ã
SELECT
    toDate(visit_date) as date,
    COUNT(*) as visits,
    COUNT(DISTINCT user_id) as unique_users,
    AVG(duration) as avg_duration
FROM visits_complete
WHERE visit_date >= today() - INTERVAL 30 DAY
GROUP BY date
ORDER BY date DESC;
```

### 4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞–ª–∏–∞—Å—ã –¥–ª—è —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –∫–æ–º–∞–Ω–¥

–î–æ–±–∞–≤—å—Ç–µ –≤ `~/.bashrc` –∏–ª–∏ `~/.zshrc`:

```bash
# –ë—ã—Å—Ç—Ä–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ ClickHouse
alias ch='clickhouse-client --host myhost.net --port 9440 --secure'

# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å AI
alias chai='clickhouse-client --host myhost.net --port 9440 --secure --config-file ~/.config/clickhouse/config.yaml'
```

–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ –ø–∏—Å–∞—Ç—å:
```bash
chai
```

### 5. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏ –∫–æ–º–∞–Ω–¥

ClickHouse CLI —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏—Å—Ç–æ—Ä–∏—é –≤ `~/.clickhouse-client-history`. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—Ç—Ä–µ–ª–∫–∏ ‚Üë‚Üì –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏.

–ü–æ–ª–µ–∑–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:
```yaml
# ~/.config/clickhouse/config.yaml
history_file: ~/.clickhouse-client-history
max_client_connections: 1000
```

## –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å Python –ø—Ä–æ–≥—Ä–∞–º–º–æ–π

| –ê—Å–ø–µ–∫—Ç | ClickHouse CLI –Ω–∞–ø—Ä—è–º—É—é | Python –ø—Ä–æ–≥—Ä–∞–º–º–∞ (text_to_sql.py) |
|--------|------------------------|-----------------------------------|
| **–£—Å—Ç–∞–Ω–æ–≤–∫–∞** | –¢–æ–ª—å–∫–æ clickhouse-client | Python + –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ + clickhouse-client |
| **–°–∫–æ—Ä–æ—Å—Ç—å –∑–∞–ø—É—Å–∫–∞** | –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ | ~1-2 —Å–µ–∫—É–Ω–¥—ã |
| **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å** | –ö–æ–º–∞–Ω–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ | –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –æ–±–æ–ª–æ—á–∫–∞ |
| **–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** | –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –≤—ã–≤–æ–¥ ClickHouse | –ö—Ä–∞—Å–∏–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã |
| **–ì–∏–±–∫–æ—Å—Ç—å** | –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º —Ñ—É–Ω–∫—Ü–∏—è–º | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–æ –ø—Ä–æ–≥—Ä–∞–º–º–æ–π |
| **–£–¥–æ–±—Å—Ç–≤–æ** | –î–ª—è –æ–ø—ã—Ç–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π | –î–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö |
| **–û–±—ã—á–Ω—ã–π SQL** | ‚úÖ –î–∞ | ‚úÖ –î–∞ |
| **AI –∑–∞–ø—Ä–æ—Å—ã** | ‚úÖ –î–∞ (—Å ??) | ‚úÖ –î–∞ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏) |
| **–°—Ö–µ–º–∞ –ë–î** | DESCRIBE TABLE | –ö–æ–º–∞–Ω–¥–∞ 'schema' |

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–¢–µ–ø–µ—Ä—å –≤—ã –∑–Ω–∞–µ—Ç–µ –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ClickHouse CLI –Ω–∞–ø—Ä—è–º—É—é —Å AI —Ñ—É–Ω–∫—Ü–∏–µ–π! –û—Å–Ω–æ–≤–Ω—ã–µ —à–∞–≥–∏:

1. ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `clickhouse-client`
2. ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å AI (–ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–ª–∏ config —Ñ–∞–π–ª)
3. ‚úÖ –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ ClickHouse (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ—Ä—Ç 9440)
4. ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `??` –¥–ª—è AI –∑–∞–ø—Ä–æ—Å–æ–≤

**–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç:**

```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è
export OPENAI_API_KEY="–≤–∞—à-–∫–ª—é—á"

# 2. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ ClickHouse
clickhouse-client \
  --host –≤–∞—à-—Ö–æ—Å—Ç \
  --port 9440 \
  --user –≤–∞—à-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å \
  --password –≤–∞—à-–ø–∞—Ä–æ–ª—å \
  --database –≤–∞—à–∞-–±–∞–∑–∞ \
  --secure

# 3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ AI!
:) ?? –ø–æ–∫–∞–∂–∏ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 –∑–∞–ø–∏—Å–µ–π
```

**–ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏:**

- [–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è ClickHouse CLI](https://clickhouse.com/docs/en/interfaces/cli)
- [AI SQL Generation –≤ ClickHouse](https://clickhouse.com/docs/en/interfaces/cli#ai-sql-generation)
- [OpenRouter](https://openrouter.ai/)
- [OpenAI](https://platform.openai.com/)
- [Anthropic](https://console.anthropic.com/)

–£–¥–∞—á–∏ –≤ —Ä–∞–±–æ—Ç–µ —Å ClickHouse! üöÄ
